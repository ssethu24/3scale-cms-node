<style>
  #reference #content > section {
    display: none; 
  }
</style>

<div id="reference" class="row">
  <div id="menu" class="col-md-3">
    {% include 'reference/menu' %}
  </div>
  <div id="content" class="col-md-9">
    {% include 'reference/api-ref' %}
  </div>
</div>

<script>
  function showApiSection(apiId, methodId) {
    $("#reference #content > section").hide();
    $("#reference #content > section#" + apiId).show();
    $("#reference #content > section#" + apiId + " > section.method").hide();

    $("#reference #menu li.method").hide();
    $("#reference #menu li.method[data-apiId=" + apiId + "]").show();

    if (methodId) {
      $("#reference #content > section#" + apiId + " > section.method#" + methodId).show();
    } else {
      $("#reference #content > section#" + apiId + " > section.method:first").show();
    }
  }
  
  function updateApiSection() {
    let apiHash = window.location.hash.replace('#', '');

    if (!apiHash) apiHash = $("#reference #content > section").first().attr('id');
    
    let apiParts = apiHash.split(':');
    let apiId = apiParts[0];
    let methodId = undefined;
    
    if (apiParts.length > 1) {
      methodId = apiParts[1];
    }

    showApiSection(apiId, methodId);
    window.scrollTo(0,0);
  }
  
  $(document).ready(function() {
    updateApiSection();
  });
  
  $(window).on('hashchange', function() {
    updateApiSection();
  });
</script>